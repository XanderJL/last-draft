{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/alexander/github/XanderJL/last-draft/pages/stories/[category].js\",\n    _this = this;\n\nimport { Container, Heading } from \"@chakra-ui/layout\";\nimport BlogTabs from \"@components/BlogTabs\";\nimport PostCard from \"@components/Cards/PostCard\";\nimport SubmitForm from \"@components/Forms/SubmitForm\";\nimport Hero from \"@components/Hero\";\nimport Layout from \"@components/Layout\";\nimport CardGrid from \"@components/Layout/Grids/CardGrid\";\nimport Section from \"@components/Layout/Section\";\nimport { PortableText, serializers } from \"@lib/sanity\";\n\nvar Category = function Category(_ref) {\n  var _heroImage$metadata;\n\n  var blogData = _ref.blogData,\n      postsData = _ref.postsData;\n  var heroImage = blogData.heroImage,\n      categories = blogData.categories;\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(Hero, {\n      placeholder: heroImage === null || heroImage === void 0 ? void 0 : (_heroImage$metadata = heroImage.metadata) === null || _heroImage$metadata === void 0 ? void 0 : _heroImage$metadata.lqip,\n      image: heroImage === null || heroImage === void 0 ? void 0 : heroImage.url,\n      minH: \"36em\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Container, {\n      maxW: \"container.xl\",\n      children: [/*#__PURE__*/_jsxDEV(BlogTabs, {\n        categories: categories\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Section, {\n        children: [/*#__PURE__*/_jsxDEV(Heading, {\n          textTransform: \"uppercase\",\n          pb: \"1.5rem\",\n          children: \"Recent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(CardGrid, {\n          children: recentPostData.map(function (post) {\n            var _mainImage$metadata;\n\n            var _id = post._id,\n                title = post.title,\n                mainImage = post.mainImage,\n                slug = post.slug,\n                category = post.category,\n                previewCopy = post.previewCopy,\n                body = post.body;\n            return /*#__PURE__*/_jsxDEV(PostCard, {\n              title: title,\n              placeholder: mainImage === null || mainImage === void 0 ? void 0 : (_mainImage$metadata = mainImage.metadata) === null || _mainImage$metadata === void 0 ? void 0 : _mainImage$metadata.lqip,\n              image: mainImage === null || mainImage === void 0 ? void 0 : mainImage.url,\n              link: \"/\".concat(category === null || category === void 0 ? void 0 : category.slug, \"/\").concat(slug),\n              children: previewCopy ? previewCopy : toPlainText(body).slice(0, 124) + \"...\"\n            }, _id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 40,\n              columnNumber: 17\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Section, {\n        children: /*#__PURE__*/_jsxDEV(SubmitForm, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 5\n  }, _this);\n};\n\n_c = Category;\nexport var __N_SSG = true;\nexport default Category;\n\nvar _c;\n\n$RefreshReg$(_c, \"Category\");","map":{"version":3,"sources":["/home/alexander/github/XanderJL/last-draft/pages/stories/[category].js"],"names":["Container","Heading","BlogTabs","PostCard","SubmitForm","Hero","Layout","CardGrid","Section","PortableText","serializers","Category","blogData","postsData","heroImage","categories","metadata","lqip","url","recentPostData","map","post","_id","title","mainImage","slug","category","previewCopy","body","toPlainText","slice"],"mappings":"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","sourcesContent":["import { Container, Heading } from \"@chakra-ui/layout\"\nimport BlogTabs from \"@components/BlogTabs\"\nimport PostCard from \"@components/Cards/PostCard\"\nimport SubmitForm from \"@components/Forms/SubmitForm\"\nimport Hero from \"@components/Hero\"\nimport Layout from \"@components/Layout\"\nimport CardGrid from \"@components/Layout/Grids/CardGrid\"\nimport Section from \"@components/Layout/Section\"\nimport { PortableText, serializers } from \"@lib/sanity\"\nimport { getClient } from \"@lib/sanity/sanity.server\"\nimport { groq } from \"next-sanity\"\n\nconst Category = ({ blogData, postsData }) => {\n  const { heroImage, categories } = blogData\n  return (\n    <Layout>\n      <Hero\n        placeholder={heroImage?.metadata?.lqip}\n        image={heroImage?.url}\n        minH=\"36em\"\n      />\n      <Container maxW=\"container.xl\">\n        <BlogTabs categories={categories} />\n        <Section>\n          <Heading textTransform=\"uppercase\" pb=\"1.5rem\">\n            Recent\n          </Heading>\n          <CardGrid>\n            {recentPostData.map((post) => {\n              const {\n                _id,\n                title,\n                mainImage,\n                slug,\n                category,\n                previewCopy,\n                body,\n              } = post\n              return (\n                <PostCard\n                  key={_id}\n                  title={title}\n                  placeholder={mainImage?.metadata?.lqip}\n                  image={mainImage?.url}\n                  link={`/${category?.slug}/${slug}`}\n                >\n                  {previewCopy\n                    ? previewCopy\n                    : toPlainText(body).slice(0, 124) + \"...\"}\n                </PostCard>\n              )\n            })}\n          </CardGrid>\n        </Section>\n        <Section>\n          <SubmitForm />\n        </Section>\n      </Container>\n    </Layout>\n  )\n}\n\nconst blogQuery = groq`\n*[_type == \"blog\"]{\n  \"heroImage\": heroImage.asset->{\n    metadata,\n    url\n  },\n  categories[!defined(parentCategory)]->{\n    _id,\n    title,\n    \"slug\": slug.current\n  }\n}[0]\n`\n\nconst postsQuery = groq`\n  *[_type == \"post\" && category->slug.current == \"creative-writing\"]{\n    _id,\n    title\n  }\n`\n\nexport const getStaticPaths = async () => {\n  const blog = await getClient().fetch(blogQuery)\n  console.log({ blog })\n\n  const paths = blog.categories.map((category) => ({\n    params: { category: category.slug },\n  }))\n\n  return { paths, fallback: false }\n}\n\nexport const getStaticProps = async ({ params }) => {\n  const blogData = await getClient().fetch(blogQuery)\n  const postsData = await getClient().fetch(postsQuery, {\n    category: params.category,\n  })\n\n  return { props: { blogData, postsData } }\n}\n\nexport default Category\n"]},"metadata":{},"sourceType":"module"}