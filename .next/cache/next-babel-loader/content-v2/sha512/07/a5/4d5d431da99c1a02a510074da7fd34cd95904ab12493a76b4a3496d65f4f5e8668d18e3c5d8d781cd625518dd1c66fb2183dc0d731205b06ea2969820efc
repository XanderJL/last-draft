{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/alexander/github/XanderJL/last-draft/pages/stories/[category].js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Container, Heading } from \"@chakra-ui/layout\";\nimport BlogTabs from \"@components/BlogTabs\";\nimport PostCard from \"@components/Cards/PostCard\";\nimport SubmitForm from \"@components/Forms/SubmitForm\";\nimport Hero from \"@components/Hero\";\nimport Layout from \"@components/Layout\";\nimport CardGrid from \"@components/Layout/Grids/CardGrid\";\nimport Section from \"@components/Layout/Section\";\nimport { PortableText, serializers } from \"@lib/sanity\";\nimport { getClient } from \"@lib/sanity/sanity.server\";\nimport { groq } from \"next-sanity\";\n\nconst Category = ({\n  postsData\n}) => {\n  var _heroImage, _heroImage$metadata, _heroImage2;\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(Hero, {\n      placeholder: (_heroImage = heroImage) === null || _heroImage === void 0 ? void 0 : (_heroImage$metadata = _heroImage.metadata) === null || _heroImage$metadata === void 0 ? void 0 : _heroImage$metadata.lqip,\n      image: (_heroImage2 = heroImage) === null || _heroImage2 === void 0 ? void 0 : _heroImage2.url,\n      minH: \"36em\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      maxW: \"container.xl\",\n      children: [/*#__PURE__*/_jsxDEV(BlogTabs, {\n        categories: categories\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        p: \"0 1.25rem\",\n        children: /*#__PURE__*/_jsxDEV(PortableText, {\n          blocks: pubBody,\n          serializers: _objectSpread(_objectSpread({}, serializers), {}, {\n            types: _objectSpread(_objectSpread({}, serializers.types), {}, {\n              blockImage: props => {\n                const {\n                  image\n                } = props.node;\n                return /*#__PURE__*/_jsxDEV(Image, {\n                  src: urlFor(image),\n                  maxH: \"140px\",\n                  w: \"auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 32,\n                  columnNumber: 26\n                }, this);\n              }\n            })\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        children: [/*#__PURE__*/_jsxDEV(Heading, {\n          textTransform: \"uppercase\",\n          pb: \"1.5rem\",\n          children: \"Recent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardGrid, {\n          children: recentPostData.map(post => {\n            var _mainImage$metadata;\n\n            const {\n              _id,\n              title,\n              mainImage,\n              slug,\n              category,\n              previewCopy,\n              body\n            } = post;\n            return /*#__PURE__*/_jsxDEV(PostCard, {\n              title: title,\n              placeholder: mainImage === null || mainImage === void 0 ? void 0 : (_mainImage$metadata = mainImage.metadata) === null || _mainImage$metadata === void 0 ? void 0 : _mainImage$metadata.lqip,\n              image: mainImage === null || mainImage === void 0 ? void 0 : mainImage.url,\n              link: `/${category === null || category === void 0 ? void 0 : category.slug}/${slug}`,\n              children: previewCopy ? previewCopy : toPlainText(body).slice(0, 124) + \"...\"\n            }, _id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        children: /*#__PURE__*/_jsxDEV(SubmitForm, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 5\n  }, this);\n};\n\nconst blogQuery = groq`\n*[_type == \"blog\"]{\n  \"heroImage\": heroImage.asset->{\n    metadata,\n    url\n  },\n  categories[!defined(parentCategory)]->{\n    _id,\n    title,\n    \"slug\": slug.current\n  }\n}[0]\n`;\nconst postsQuery = groq`\n  *[_type == \"post\" && category->slug.current == \"creative-writing\"]{\n    _id,\n    title\n  }\n`;\nexport const getStaticPaths = async () => {\n  const blog = await getClient().fetch(blogQuery);\n  console.log({\n    blog\n  });\n  const paths = blog.categories.map(category => ({\n    params: {\n      category: category.slug\n    }\n  }));\n  return {\n    paths,\n    fallback: false\n  };\n};\nexport const getStaticProps = async ({\n  params\n}) => {\n  const postsData = await getClient().fetch(postsQuery, {\n    category: params.category\n  });\n  return {\n    props: {\n      postsData\n    }\n  };\n};\nexport default Category;","map":{"version":3,"sources":["/home/alexander/github/XanderJL/last-draft/pages/stories/[category].js"],"names":["Container","Heading","BlogTabs","PostCard","SubmitForm","Hero","Layout","CardGrid","Section","PortableText","serializers","getClient","groq","Category","postsData","heroImage","metadata","lqip","url","categories","pubBody","types","blockImage","props","image","node","urlFor","recentPostData","map","post","_id","title","mainImage","slug","category","previewCopy","body","toPlainText","slice","blogQuery","postsQuery","getStaticPaths","blog","fetch","console","log","paths","params","fallback","getStaticProps"],"mappings":"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","sourcesContent":["import { Container, Heading } from \"@chakra-ui/layout\"\nimport BlogTabs from \"@components/BlogTabs\"\nimport PostCard from \"@components/Cards/PostCard\"\nimport SubmitForm from \"@components/Forms/SubmitForm\"\nimport Hero from \"@components/Hero\"\nimport Layout from \"@components/Layout\"\nimport CardGrid from \"@components/Layout/Grids/CardGrid\"\nimport Section from \"@components/Layout/Section\"\nimport { PortableText, serializers } from \"@lib/sanity\"\nimport { getClient } from \"@lib/sanity/sanity.server\"\nimport { groq } from \"next-sanity\"\n\nconst Category = ({ postsData }) => {\n  return (\n    <Layout>\n      <Hero\n        placeholder={heroImage?.metadata?.lqip}\n        image={heroImage?.url}\n        minH=\"36em\"\n      />\n      <Container maxW=\"container.xl\">\n        <BlogTabs categories={categories} />\n        <Section p=\"0 1.25rem\">\n          <PortableText\n            blocks={pubBody}\n            serializers={{\n              ...serializers,\n              types: {\n                ...serializers.types,\n                blockImage: (props) => {\n                  const { image } = props.node\n                  return <Image src={urlFor(image)} maxH=\"140px\" w=\"auto\" />\n                },\n              },\n            }}\n          />\n        </Section>\n        <Section>\n          <Heading textTransform=\"uppercase\" pb=\"1.5rem\">\n            Recent\n          </Heading>\n          <CardGrid>\n            {recentPostData.map((post) => {\n              const {\n                _id,\n                title,\n                mainImage,\n                slug,\n                category,\n                previewCopy,\n                body,\n              } = post\n              return (\n                <PostCard\n                  key={_id}\n                  title={title}\n                  placeholder={mainImage?.metadata?.lqip}\n                  image={mainImage?.url}\n                  link={`/${category?.slug}/${slug}`}\n                >\n                  {previewCopy\n                    ? previewCopy\n                    : toPlainText(body).slice(0, 124) + \"...\"}\n                </PostCard>\n              )\n            })}\n          </CardGrid>\n        </Section>\n        <Section>\n          <SubmitForm />\n        </Section>\n      </Container>\n    </Layout>\n  )\n}\n\nconst blogQuery = groq`\n*[_type == \"blog\"]{\n  \"heroImage\": heroImage.asset->{\n    metadata,\n    url\n  },\n  categories[!defined(parentCategory)]->{\n    _id,\n    title,\n    \"slug\": slug.current\n  }\n}[0]\n`\n\nconst postsQuery = groq`\n  *[_type == \"post\" && category->slug.current == \"creative-writing\"]{\n    _id,\n    title\n  }\n`\n\nexport const getStaticPaths = async () => {\n  const blog = await getClient().fetch(blogQuery)\n  console.log({ blog })\n\n  const paths = blog.categories.map((category) => ({\n    params: { category: category.slug },\n  }))\n\n  return { paths, fallback: false }\n}\n\nexport const getStaticProps = async ({ params }) => {\n  const postsData = await getClient().fetch(postsQuery, {\n    category: params.category,\n  })\n\n  return { props: { postsData } }\n}\n\nexport default Category\n"]},"metadata":{},"sourceType":"module"}