{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/alexander/github/XanderJL/last-draft/pages/stories/index.js\";\nimport { Container, Heading } from \"@chakra-ui/react\";\nimport { groq } from \"next-sanity\";\nimport { getClient } from \"@lib/sanity/sanity.server\";\nimport Layout from \"@components/Layout\";\nimport Hero from \"@components/Hero\";\nimport BlogTabs from \"@components/BlogTabs\";\nimport { PortableText } from \"@lib/sanity\";\nimport Section from \"@components/Layout/Section\";\nimport PostCard from \"@components/Cards/PostCard\";\nimport CardGrid from \"@components/Layout/Grids/CardGrid\";\n\nconst Stories = ({\n  blogData,\n  recentPostData,\n  categoryData\n}) => {\n  var _heroImage$metadata;\n\n  const {\n    heroImage,\n    pubBody\n  } = blogData;\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(Hero, {\n      placeholder: heroImage === null || heroImage === void 0 ? void 0 : (_heroImage$metadata = heroImage.metadata) === null || _heroImage$metadata === void 0 ? void 0 : _heroImage$metadata.lqip,\n      image: heroImage === null || heroImage === void 0 ? void 0 : heroImage.url,\n      minH: \"36em\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      maxW: \"container.lg\",\n      children: [/*#__PURE__*/_jsxDEV(BlogTabs, {\n        categories: categoryData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        children: /*#__PURE__*/_jsxDEV(PortableText, {\n          blocks: pubBody\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        children: [/*#__PURE__*/_jsxDEV(Heading, {\n          textTransform: \"uppercase\",\n          pb: \"1.5rem\",\n          children: \"Recent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardGrid, {\n          children: recentPostData.map(post => {\n            var _mainImage$metadata;\n\n            const {\n              _id,\n              title,\n              mainImage,\n              slug,\n              category\n            } = post;\n            return /*#__PURE__*/_jsxDEV(PostCard, {\n              title: title,\n              placeholder: mainImage === null || mainImage === void 0 ? void 0 : (_mainImage$metadata = mainImage.metadata) === null || _mainImage$metadata === void 0 ? void 0 : _mainImage$metadata.lqip,\n              image: mainImage === null || mainImage === void 0 ? void 0 : mainImage.url,\n              link: `/${category === null || category === void 0 ? void 0 : category.slug}/${slug}`,\n              children: \"brunkus\"\n            }, _id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 35,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 5\n  }, this);\n};\n\nconst blogQuery = groq`\n*[_type == \"blog\"]{\n  title,\n  \"slug\": slug.current,\n  \"heroImage\": heroImage.asset->{\n    metadata,\n    url\n  },\n  \"pubBody\": publication.body,\n  featuredPosts[]->{\n    _id,\n    title,\n    \"slug\": slug.current,\n    category->{\n      \"slug\": slug.current,\n      title\n    },\n    body,\n    \"mainImage\": mainImage.asset->{\n      metadata,\n      url\n    }\n  }\n}[0]\n`;\nconst recentPostsQuery = groq`\n  *[_type == \"post\"] | order(publishedAt desc){\n    _id,\n    title,\n    \"slug\": slug.current,\n    category->{\n      \"slug\": slug.current,\n      title\n    },\n    body,\n    \"mainImage\": mainImage.asset->{\n      metadata,\n      url\n    }\n  }[0..2]\n`;\nconst categoriesQuery = groq`\n  *[_type == \"category\" && !defined(parentCategory)]{\n    _id,\n    title,\n    \"slug\": slug.current,\n    description,\n    \"posts\": *[_type == \"post\" && references(^._id)] | order(publishedAt desc) {\n      _id,\n      publishedAt,\n      \"slug\": slug.current,\n      title,\n      \"mainImage\": mainImage.asset->{\n        metadata,\n        url\n      },\n      previewCopy,\n      body,\n      category->{\n        \"slug\": slug.current\n      },\n      parentCategory->{\n        \"slug\": slug.current\n      }\n    }[0..2]\n  }\n`;\nconst featuredPostsQuery = groq`\n  *[_type == \"post\"]{}\n`;\nexport const getStaticProps = async () => {\n  const blogData = await getClient().fetch(blogQuery);\n  const recentPostData = await getClient().fetch(recentPostsQuery);\n  const categoryData = await getClient().fetch(categoriesQuery);\n  return {\n    props: {\n      blogData,\n      recentPostData,\n      categoryData\n    }\n  };\n};\nexport default Stories;","map":{"version":3,"sources":["/home/alexander/github/XanderJL/last-draft/pages/stories/index.js"],"names":["Container","Heading","groq","getClient","Layout","Hero","BlogTabs","PortableText","Section","PostCard","CardGrid","Stories","blogData","recentPostData","categoryData","heroImage","pubBody","metadata","lqip","url","map","post","_id","title","mainImage","slug","category","blogQuery","recentPostsQuery","categoriesQuery","featuredPostsQuery","getStaticProps","fetch","props"],"mappings":"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","sourcesContent":["import { Container, Heading } from \"@chakra-ui/react\"\nimport { groq } from \"next-sanity\"\nimport { getClient } from \"@lib/sanity/sanity.server\"\nimport Layout from \"@components/Layout\"\nimport Hero from \"@components/Hero\"\nimport BlogTabs from \"@components/BlogTabs\"\nimport { PortableText } from \"@lib/sanity\"\nimport Section from \"@components/Layout/Section\"\nimport PostCard from \"@components/Cards/PostCard\"\nimport CardGrid from \"@components/Layout/Grids/CardGrid\"\n\nconst Stories = ({ blogData, recentPostData, categoryData }) => {\n  const { heroImage, pubBody } = blogData\n\n  return (\n    <Layout>\n      <Hero\n        placeholder={heroImage?.metadata?.lqip}\n        image={heroImage?.url}\n        minH=\"36em\"\n      />\n      <Container maxW=\"container.lg\">\n        <BlogTabs categories={categoryData} />\n        <Section>\n          <PortableText blocks={pubBody} />\n        </Section>\n        <Section>\n          <Heading textTransform=\"uppercase\" pb=\"1.5rem\">\n            Recent\n          </Heading>\n          <CardGrid>\n            {recentPostData.map((post) => {\n              const { _id, title, mainImage, slug, category } = post\n              return (\n                <PostCard\n                  key={_id}\n                  title={title}\n                  placeholder={mainImage?.metadata?.lqip}\n                  image={mainImage?.url}\n                  link={`/${category?.slug}/${slug}`}\n                >\n                  brunkus\n                </PostCard>\n              )\n            })}\n          </CardGrid>\n        </Section>\n      </Container>\n      {/* <Hero />\n      <Container maxW=\"container.xl\">\n        <BlogTabs />\n        <Box\n          as=\"section\"\n          p={{ base: \"1.25rem\", md: \"2rem 1.25rem 3rem 1.25rem\" }}\n        >\n          <Box>\n            <PortableText blocks={pubBody} />\n          </Box>\n        </Box>\n        <section id=\"recent\" className=\"section-category\">\n          <h2\n            className=\"title is-size-3-desktop is-size-4-mobile is-montserrat is-uppercase has-text-black\"\n            style={{ marginBottom: \"0\" }}\n          >\n            Recent\n          </h2>\n          <hr style={{ margin: \"0.75rem 0\" }} />\n          <div className=\"wrapper-post\" style={{ padding: \"2rem 0\" }}>\n            {latestPosts.edges.map(({ node: post }) => {\n              const {\n                id,\n                title,\n                mainImage,\n                _rawBody,\n                previewCopy,\n                category,\n                slug,\n              } = post\n              const image = mainImage.asset\n              const link = category.parentCategory\n                ? `/stories/${category.parentCategory.slug.current}/${category.slug.current}/${slug.current}`\n                : `/stories/${category.slug.current}/${slug.current}`\n              return (\n                <PostCard key={id} title={title} image={image} link={link}>\n                  {previewCopy\n                    ? previewCopy\n                    : toPlainText(_rawBody).slice(0, 159) + \"...\"}\n                </PostCard>\n              )\n            })}\n          </div>\n        </section>\n        <section id=\"featured\" className=\"section\">\n          <h2\n            className=\"title is-size-3-desktop is-size-4-mobile is-montserrat is-uppercase has-text-black\"\n            style={{ marginBottom: \"0\" }}\n          >\n            Featured\n          </h2>\n          <hr style={{ margin: \"0.75rem 0\" }} />\n          <div className=\"wrapper-post\" style={{ padding: \"2rem 0\" }}>\n            {featuredPosts.featuredPosts.map((post) => {\n              const {\n                id,\n                title,\n                mainImage,\n                _rawBody,\n                previewCopy,\n                category,\n                slug,\n              } = post\n              const image = mainImage.asset\n              const link = category.parentCategory\n                ? `/stories/${category.parentCategory.slug.current}/${category.slug.current}/${slug.current}`\n                : `/stories/${category.slug.current}/${slug.current}`\n              return (\n                <PostCard\n                  key={id}\n                  title={title}\n                  image={image}\n                  link={link}\n                  cardStyle={{ maxWidth: \"420px\" }}\n                >\n                  {previewCopy\n                    ? previewCopy\n                    : toPlainText(_rawBody).slice(0, 159) + \"...\"}\n                </PostCard>\n              )\n            })}\n          </div>\n        </section>\n        {categories.map((category) => {\n          const { id, slug, title, description } = category\n          const link = `/stories/${slug.current}`\n\n          return (\n            <section key={id} id={slug.current} className=\"section-category\">\n              <Link to={\"/stories/\" + slug.current}>\n                <h2 className=\"title is-size-2-desktop is-size-4-mobile is-montserrat is-uppercase has-text-black\">\n                  {title}\n                </h2>\n                <hr />\n              </Link>\n              {description && <Text maxW=\"75ch\">{description}</Text>}\n              <div className=\"wrapper-post\" style={{ padding: \"2rem 0\" }}>\n                {posts.edges\n                  .filter(\n                    ({ node: post }) =>\n                      post.category.slug.current === slug.current\n                  )\n                  .slice(0, 3)\n                  .map(({ node: post }) => {\n                    const {\n                      id,\n                      title,\n                      mainImage,\n                      _rawBody,\n                      previewCopy,\n                      category,\n                      slug,\n                    } = post\n                    const image = mainImage.asset\n                    const link = `/stories/${category.slug.current}/${slug.current}`\n                    return (\n                      <PostCard\n                        key={id}\n                        title={title}\n                        image={image}\n                        link={link}\n                        cardStyle={{ maxWidth: \"420px\" }}\n                      >\n                        {previewCopy\n                          ? previewCopy\n                          : toPlainText(_rawBody).slice(0, 159) + \"...\"}\n                      </PostCard>\n                    )\n                  })}\n              </div>\n              <Link to={link} className=\"button is-size-5\">\n                More Articles &rsaquo;\n              </Link>\n            </section>\n          )\n        })}\n        <section className=\"section\">\n          <SubmitForm />\n        </section>\n      </Container>\n      <OptInModal /> */}\n    </Layout>\n  )\n}\n\nconst blogQuery = groq`\n*[_type == \"blog\"]{\n  title,\n  \"slug\": slug.current,\n  \"heroImage\": heroImage.asset->{\n    metadata,\n    url\n  },\n  \"pubBody\": publication.body,\n  featuredPosts[]->{\n    _id,\n    title,\n    \"slug\": slug.current,\n    category->{\n      \"slug\": slug.current,\n      title\n    },\n    body,\n    \"mainImage\": mainImage.asset->{\n      metadata,\n      url\n    }\n  }\n}[0]\n`\n\nconst recentPostsQuery = groq`\n  *[_type == \"post\"] | order(publishedAt desc){\n    _id,\n    title,\n    \"slug\": slug.current,\n    category->{\n      \"slug\": slug.current,\n      title\n    },\n    body,\n    \"mainImage\": mainImage.asset->{\n      metadata,\n      url\n    }\n  }[0..2]\n`\n\nconst categoriesQuery = groq`\n  *[_type == \"category\" && !defined(parentCategory)]{\n    _id,\n    title,\n    \"slug\": slug.current,\n    description,\n    \"posts\": *[_type == \"post\" && references(^._id)] | order(publishedAt desc) {\n      _id,\n      publishedAt,\n      \"slug\": slug.current,\n      title,\n      \"mainImage\": mainImage.asset->{\n        metadata,\n        url\n      },\n      previewCopy,\n      body,\n      category->{\n        \"slug\": slug.current\n      },\n      parentCategory->{\n        \"slug\": slug.current\n      }\n    }[0..2]\n  }\n`\n\nconst featuredPostsQuery = groq`\n  *[_type == \"post\"]{}\n`\n\nexport const getStaticProps = async () => {\n  const blogData = await getClient().fetch(blogQuery)\n  const recentPostData = await getClient().fetch(recentPostsQuery)\n  const categoryData = await getClient().fetch(categoriesQuery)\n\n  return { props: { blogData, recentPostData, categoryData } }\n}\n\nexport default Stories\n"]},"metadata":{},"sourceType":"module"}