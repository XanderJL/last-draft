{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/alexander/github/XanderJL/last-draft/node_modules/next/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/alexander/github/XanderJL/last-draft/pages/stories/index.js\",\n    _this = this;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  *[_type == \\\"post\\\"]{}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { Box, Container, Text } from \"@chakra-ui/react\";\nimport { groq } from \"next-sanity\";\nimport Layout from \"@components/Layout\";\nimport Hero from \"@components/Hero\";\n\nvar Stories = function Stories(_ref) {\n  var _heroImage$metadata;\n\n  var blogData = _ref.blogData,\n      categoryData = _ref.categoryData;\n  var heroImage = blogData.heroImage;\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(Hero, {\n      placeholder: heroImage === null || heroImage === void 0 ? void 0 : (_heroImage$metadata = heroImage.metadata) === null || _heroImage$metadata === void 0 ? void 0 : _heroImage$metadata.lqip,\n      image: heroImage === null || heroImage === void 0 ? void 0 : heroImage.url,\n      minH: \"36em\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"pre\", {\n      children: JSON.stringify(blogData, null, 2)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"pre\", {\n      children: JSON.stringify(categoryData, null, 2)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 5\n  }, _this);\n};\n\n_c = Stories;\nvar featuredPostsQuery = groq(_templateObject());\nexport var __N_SSG = true;\nexport default Stories;\n\nvar _c;\n\n$RefreshReg$(_c, \"Stories\");","map":{"version":3,"sources":["/home/alexander/github/XanderJL/last-draft/pages/stories/index.js"],"names":["Box","Container","Text","groq","Layout","Hero","Stories","blogData","categoryData","heroImage","metadata","lqip","url","JSON","stringify","featuredPostsQuery"],"mappings":";;;;;;;;;;;;;;;;AAAA,SAASA,GAAT,EAAcC,SAAd,EAAyBC,IAAzB,QAAqC,kBAArC;AACA,SAASC,IAAT,QAAqB,aAArB;AAEA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,OAAgC;AAAA;;AAAA,MAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,MAAnBC,YAAmB,QAAnBA,YAAmB;AAAA,MACtCC,SADsC,GACxBF,QADwB,CACtCE,SADsC;AAE9C,sBACE,QAAC,MAAD;AAAA,4BACE,QAAC,IAAD;AACE,MAAA,WAAW,EAAEA,SAAF,aAAEA,SAAF,8CAAEA,SAAS,CAAEC,QAAb,wDAAE,oBAAqBC,IADpC;AAEE,MAAA,KAAK,EAAEF,SAAF,aAAEA,SAAF,uBAAEA,SAAS,CAAEG,GAFpB;AAGE,MAAA,IAAI,EAAC;AAHP;AAAA;AAAA;AAAA;AAAA,aADF,eAME;AAAA,gBAAMC,IAAI,CAACC,SAAL,CAAeP,QAAf,EAAyB,IAAzB,EAA+B,CAA/B;AAAN;AAAA;AAAA;AAAA;AAAA,aANF,eAOE;AAAA,gBAAMM,IAAI,CAACC,SAAL,CAAeN,YAAf,EAA6B,IAA7B,EAAmC,CAAnC;AAAN;AAAA;AAAA;AAAA;AAAA,aAPF;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AAwJD,CA1JD;;KAAMF,O;AAiNN,IAAMS,kBAAkB,GAAGZ,IAAH,mBAAxB;;AAWA,eAAeG,OAAf","sourcesContent":["import { Box, Container, Text } from \"@chakra-ui/react\"\nimport { groq } from \"next-sanity\"\nimport { getClient } from \"@lib/sanity/sanity.server\"\nimport Layout from \"@components/Layout\"\nimport Hero from \"@components/Hero\"\n\nconst Stories = ({ blogData, categoryData }) => {\n  const { heroImage } = blogData\n  return (\n    <Layout>\n      <Hero\n        placeholder={heroImage?.metadata?.lqip}\n        image={heroImage?.url}\n        minH=\"36em\"\n      ></Hero>\n      <pre>{JSON.stringify(blogData, null, 2)}</pre>\n      <pre>{JSON.stringify(categoryData, null, 2)}</pre>\n      {/* <Hero />\n      <Container maxW=\"container.xl\">\n        <BlogTabs />\n        <Box\n          as=\"section\"\n          p={{ base: \"1.25rem\", md: \"2rem 1.25rem 3rem 1.25rem\" }}\n        >\n          <Box>\n            <PortableText blocks={pubBody} />\n          </Box>\n        </Box>\n        <section id=\"recent\" className=\"section-category\">\n          <h2\n            className=\"title is-size-3-desktop is-size-4-mobile is-montserrat is-uppercase has-text-black\"\n            style={{ marginBottom: \"0\" }}\n          >\n            Recent\n          </h2>\n          <hr style={{ margin: \"0.75rem 0\" }} />\n          <div className=\"wrapper-post\" style={{ padding: \"2rem 0\" }}>\n            {latestPosts.edges.map(({ node: post }) => {\n              const {\n                id,\n                title,\n                mainImage,\n                _rawBody,\n                previewCopy,\n                category,\n                slug,\n              } = post\n              const image = mainImage.asset\n              const link = category.parentCategory\n                ? `/stories/${category.parentCategory.slug.current}/${category.slug.current}/${slug.current}`\n                : `/stories/${category.slug.current}/${slug.current}`\n              return (\n                <PostCard key={id} title={title} image={image} link={link}>\n                  {previewCopy\n                    ? previewCopy\n                    : toPlainText(_rawBody).slice(0, 159) + \"...\"}\n                </PostCard>\n              )\n            })}\n          </div>\n        </section>\n        <section id=\"featured\" className=\"section\">\n          <h2\n            className=\"title is-size-3-desktop is-size-4-mobile is-montserrat is-uppercase has-text-black\"\n            style={{ marginBottom: \"0\" }}\n          >\n            Featured\n          </h2>\n          <hr style={{ margin: \"0.75rem 0\" }} />\n          <div className=\"wrapper-post\" style={{ padding: \"2rem 0\" }}>\n            {featuredPosts.featuredPosts.map((post) => {\n              const {\n                id,\n                title,\n                mainImage,\n                _rawBody,\n                previewCopy,\n                category,\n                slug,\n              } = post\n              const image = mainImage.asset\n              const link = category.parentCategory\n                ? `/stories/${category.parentCategory.slug.current}/${category.slug.current}/${slug.current}`\n                : `/stories/${category.slug.current}/${slug.current}`\n              return (\n                <PostCard\n                  key={id}\n                  title={title}\n                  image={image}\n                  link={link}\n                  cardStyle={{ maxWidth: \"420px\" }}\n                >\n                  {previewCopy\n                    ? previewCopy\n                    : toPlainText(_rawBody).slice(0, 159) + \"...\"}\n                </PostCard>\n              )\n            })}\n          </div>\n        </section>\n        {categories.map((category) => {\n          const { id, slug, title, description } = category\n          const link = `/stories/${slug.current}`\n\n          return (\n            <section key={id} id={slug.current} className=\"section-category\">\n              <Link to={\"/stories/\" + slug.current}>\n                <h2 className=\"title is-size-2-desktop is-size-4-mobile is-montserrat is-uppercase has-text-black\">\n                  {title}\n                </h2>\n                <hr />\n              </Link>\n              {description && <Text maxW=\"75ch\">{description}</Text>}\n              <div className=\"wrapper-post\" style={{ padding: \"2rem 0\" }}>\n                {posts.edges\n                  .filter(\n                    ({ node: post }) =>\n                      post.category.slug.current === slug.current\n                  )\n                  .slice(0, 3)\n                  .map(({ node: post }) => {\n                    const {\n                      id,\n                      title,\n                      mainImage,\n                      _rawBody,\n                      previewCopy,\n                      category,\n                      slug,\n                    } = post\n                    const image = mainImage.asset\n                    const link = `/stories/${category.slug.current}/${slug.current}`\n                    return (\n                      <PostCard\n                        key={id}\n                        title={title}\n                        image={image}\n                        link={link}\n                        cardStyle={{ maxWidth: \"420px\" }}\n                      >\n                        {previewCopy\n                          ? previewCopy\n                          : toPlainText(_rawBody).slice(0, 159) + \"...\"}\n                      </PostCard>\n                    )\n                  })}\n              </div>\n              <Link to={link} className=\"button is-size-5\">\n                More Articles &rsaquo;\n              </Link>\n            </section>\n          )\n        })}\n        <section className=\"section\">\n          <SubmitForm />\n        </section>\n      </Container>\n      <OptInModal /> */}\n    </Layout>\n  )\n}\n\nconst blogQuery = groq`\n*[_type == \"blog\"]{\n  title,\n  \"slug\": slug.current,\n  \"heroImage\": heroImage.asset->{\n    metadata,\n    url\n  },\n  publication,\n  featuredPosts[]->{\n    _id,\n    title,\n    \"slug\": slug.current,\n    category->{\n      \"slug\": slug.current,\n      title\n    },\n    body,\n    \"mainImage\": mainImage.asset->{\n      metadata,\n      url\n    }\n  }\n}[0]\n`\n\nconst categoriesQuery = groq`\n  *[_type == \"category\"]{\n    _id,\n    title,\n    \"slug\": slug.current,\n    description,\n    \"posts\": *[_type == \"post\" && references(^._id)] | order(publishedAt desc) {\n      _id,\n      publishedAt,\n      \"slug\": slug.current,\n      title,\n      \"mainImage\": mainImage.asset->{\n        metadata,\n        url\n      },\n      previewCopy,\n      body,\n      category->{\n        \"slug\": slug.current\n      },\n      parentCategory->{\n        \"slug\": slug.current\n      }\n    }[0..2]\n  }\n`\n\nconst featuredPostsQuery = groq`\n  *[_type == \"post\"]{}\n`\n\nexport const getStaticProps = async () => {\n  const blogData = await getClient().fetch(blogQuery)\n  const categoryData = await getClient().fetch(categoriesQuery)\n\n  return { props: { blogData, categoryData } }\n}\n\nexport default Stories\n"]},"metadata":{},"sourceType":"module"}